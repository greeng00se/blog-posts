> Joshua Bloch님의 Effective Java 3/E를 읽고 정리한 글입니다.
> 

## 예외는 진짜 예외 상황에만 사용하라

- 예외는 어떤 상황에서 사용해야 하는지, 또한 사용을 안한다면 어떻게 개발해야 하는지 알아보자.

### 예외의 사용

- 예외는 예외 상황에서만 사용해야 한다.
    - 일상적인 제어 흐름용으로 사용되어선 안된다.
- 클라이언트가 정상적인 흐름에서 예외를 사용할 일이 없게 해야 한다.

### 상태 의존적 메서드

- 정상적인 흐름이라면 예외를 사용하는 대신 상태를 검사하는 방법을 사용하는 방법이 있다.
- 특정 상태에서만 호출할 수 있는 상태 의존적 메서드를 제공하는 클래스라면 상태 검사 메서드를 제공해야 한다.
- 대표적인 예시로 `Iterator`가 있다.
- `Iterator`의 경우 상태 검사 메서드로 `hasNext()` 메서드를 제공하고 있다.

```java
List<Integer> list = List.of(1, 2, 3, 4);
for (Iterator<Integer> i = list.iterator(); i.hasNext(); ) {
    Integer next = i.next();
}
```

### 상태 검사 방법

- 다음과 같은 상황에선 옵셔널이나 특정 값을 사용한다.
    - 외부 동기화 없이 여러 스레드가 동시에 접근할 수 있는 경우
    - 외부 요인으로 상태가 변하는 경우
    - 성능이 중요한 상황에서 상태 검사 메서드가 상태 의존적 메서드의 작업을 일부 중복 수행하는 경우
- 나머지의 경우에는 상태 검사 메서드 방식을 사용하는 편이 좋다.
    - 상태 검사 메서드 호출을 하지 않았을 경우 예외를 던져서 잘못된 사용을 방지할 수 있다.
    

## 정리

- 예외는 예외 상황에서만 사용해야 한다.
- 정상적인 제어 흐름에서는 상태를 검사하여 개발하는 방법이 있다.